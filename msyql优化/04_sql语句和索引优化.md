#### sql语句和索引优化 ####
我们的目标是将sql索引的type优化为ref或range,
##### 1.单表优化 #####
一条sql的 查询结果查询条件相同 .可优化的只有
    1.索引
    2.条件的顺序 对于复合索引,查询条件的顺序,最好和索引创建的顺序一致.且含有in的条件放到后面
##### 2.多表优化 #####
    1.sql语句中小表驱动大表(小表在前面)
    2.索引建立在经常查询的字段上
##### 3.避免索引失效原则 #####
    a.复合索引,不要跨列或无须使用
    b.复合索引,尽量使用全索引匹配
    c.不要再索引上进行任何操作(计算函数类型转换),否则索引失效.
    d.复合索引不能使用 != is null is not null 否则自身和右侧条件都失效
    e.like以常量开头,使用%会使索引失效,全表扫描.
    f.尽量不要使用类型转换
    g.尽量不要使用 or 否则索引失效
##### 4.优化方法 #####
针对索引失败的情况 可以采取的措施
    a. exist 和 in
    有子查询的语句,子查询结果为单列.
    如果主查询数据及大,使用in,如果子查询数据集大,使用exist.

    b. order by  会降低效率
     1. 避免select * 
     2. 复合索引不要跨列使用
     3. 排序要一致 都是升 都是降
     4. 根据业务调整buffer大小,使用单路还是双路.


##### 5. 其他优化方式 #####
1. 减少数据量

    - 历史数据归档,提供热点数据查询s.
    - 对于某些常用的复杂查询,可用中间表来存储,这样查询的更快.
    - 分库分表,数据量大分表,并发量要求高分库.
    - 序列化数据

2. 增大空间 

    - 一主多从,读写分离.
    - 使用缓存将热点缓存

3. 选择更好的存储系统

    有的字段需要全文查询,使用nosql es更好.
#### mysql锁机制 ####
##### 1.锁的分类 #####
1.操作类型
    a.读锁(共享锁):对同一个数据,多个读操作可以同时进行.
    b.写锁(排它锁):同一个数据,只允许一个写操作.
2.操作范围
    a.表锁:一次性对一张表加锁
    b.行锁:一次性对一条数据加锁
    c.页锁:一次性对一页数据加锁
##### 2.读锁 #####
会话a 会话b 表t

a给t加读锁

a可读
a可写
a对其他表都不可读写

b可读
b不可写 待会话a释放锁
b对其他表可读写

##### 3.写锁 #####

会话a 会话b 表t

a给t加写锁

a可读
a可写
a对其他表都不可读写

b不可读 待会话a释放锁
b不可写 待会话a释放锁
b对其他表可读写

##### 4.行锁和表锁 #####
1.innodb下 ,表锁常常通过显示调用 
2.innodb 行锁一般通过事务提交释放.
3.如果索引失效,行锁会自动变为表锁.

间隙锁 where后面是条件,但条件中有些数据没有,那mysql会给没有的行也就是间隙加锁,事务不提交,其他会话想要写间隙中的数据会失败.